"use strict";(self.webpackChunkITSP=self.webpackChunkITSP||[]).push([[46],{3046:(J,m,a)=>{a.r(m),a.d(m,{default:()=>L});var g=a(6814),d=a(846),t=a(5879);let C=(()=>{class r{static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-main-category"]],standalone:!0,features:[t.jDz],decls:1,vars:0,template:function(o,n){1&o&&t._UZ(0,"router-outlet")},dependencies:[g.ez,d.lC]})}return r})();var v=a(1818),b=a(2135),y=a(8034),u=a(8733),i=a(6223),p=a(5401),f=a(8383),_=a(7700);const M=function(r,l){return[r,l]};function x(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16),t._UZ(4,"img",17),t.qZA(),t.TgZ(5,"div",18)(6,"div",19)(7,"div",20)(8,"div",21)(9,"a",22)(10,"h5",23),t._uU(11),t.qZA()()(),t.TgZ(12,"div",24)(13,"a",25),t.ALo(14,"localize"),t._uU(15,"\u062a\u0639\u062f\u064a\u0644 "),t._UZ(16,"i",26),t.qZA(),t.TgZ(17,"button",27),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.deleteCategory(s.id,s.title))}),t._uU(18," \u062d\u0630\u0641 "),t._UZ(19,"i",28),t.qZA()()()()()()()()}if(2&r){const e=l.$implicit;t.xp6(4),t.Q6J("src",e.conversion_urls[0].original,t.LSH)("alt",e.title+" Image"),t.xp6(7),t.Oqu(e.title),t.xp6(2),t.Q6J("routerLink",t.WLB(6,M,t.lcZ(14,4,"/dashboard/categories/add-category"),e.id))}}function P(r,l){1&r&&(t.TgZ(0,"div",29)(1,"p"),t._uU(2,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),t.qZA()())}let O=(()=>{class r{constructor(e,o,n){this.blogService=e,this.categoriesService=o,this.dialog=n,this.categories=[],this.searchQuery="",this.loading=!1}ngOnInit(){this.blogService.initializeNavItems(),this.getCatList()}getCatList(e=1){this.loading=!0,this.categoriesService.GetCategoriesList({page:e}).subscribe({next:o=>{this.loading=!1,this.categories=o.data.data},error:o=>{this.loading=!1,console.error("Error in categories list",o)}})}deleteCategory(e,o){this.dialog.open(y.$,{width:"500px",data:{title:"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062d\u0630\u0641",message:`\u061f ${o} \u0647\u0644 \u062a\u0631\u064a\u062f \u062d\u0630\u0641  `}}).afterClosed().subscribe(s=>{s&&this.categoriesService.DeleteCategory(e.toString()).subscribe({next:c=>{this.getCatList()},error:c=>{console.error("There was an error deleting the category!",c)}})})}onPageChange(e){this.getCatList(e)}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(p.Q),t.Y36(f.G),t.Y36(_.uw))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-categories-list"]],standalone:!0,features:[t.jDz],decls:16,vars:11,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],[1,"mb-4","filterForm"],[1,"col-xl-4","col-md-6","mb-lg-2","mb-2"],[1,"input-group"],[1,"btn"],[1,"fa-solid","fa-magnifying-glass"],["type","search","name","search","id","search",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","mx-0"],["class","col-md-6 mb-1",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[3,"currentPage","totalPages","pageChange"],[1,"col-md-6","mb-1"],[1,"card","mb-3","border-0"],[1,"row","g-0","align-items-center","p-2"],[1,"col-xl-4","col-md-3","p-2","text-center"],[1,"img-fluid","rounded-start",3,"src","alt"],[1,"col-xl-8","col-md-9"],[1,"card-body"],[1,"row","mb-2"],[1,"col-xl-6","order-xl-1","order-2"],[1,"text-reset","text-decoration-none"],[1,"card-title"],[1,"col-xl-6","order-xl-2","order-1","mb-md-0","mb-2","text-end","px-0"],[1,"btn","mx-1","edit",3,"routerLink"],[1,"fa-regular","fa-pen-to-square"],[1,"btn","delete",3,"click"],[1,"fa-regular","fa-trash-can"],[1,"text-center"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",1)(5,"div",4)(6,"div",5)(7,"button",6),t._UZ(8,"i",7),t.qZA(),t.TgZ(9,"input",8),t.NdJ("ngModelChange",function(c){return n.searchQuery=c}),t.qZA()()()()(),t.TgZ(10,"div",9),t.YNc(11,x,20,9,"div",10),t.ALo(12,"filter"),t.YNc(13,P,3,0,"div",11),t.ALo(14,"filter"),t.qZA(),t.TgZ(15,"pagination",12),t.NdJ("pageChange",function(c){return n.onPageChange(c)}),t.qZA()()()()),2&o&&(t.xp6(9),t.Q6J("ngModel",n.searchQuery),t.xp6(2),t.Q6J("ngForOf",t.xi3(12,5,n.categories,n.searchQuery)),t.xp6(2),t.Q6J("ngIf",0===t.xi3(14,8,n.categories,n.searchQuery).length&&!n.loading),t.xp6(2),t.Q6J("currentPage",n.currentPage)("totalPages",n.totalPages))},dependencies:[g.ez,g.sg,g.O5,v.Q,b.u,d.rH,u.fQ,u.lO,i.u5,i._Y,i.Fj,i.JJ,i.JL,i.On,i.F],styles:["a.edit[_ngcontent-%COMP%]{background-color:var(--stroke-color2);color:var(--main)}button.delete[_ngcontent-%COMP%]{background-color:var(--danger);color:#fff}.filterForm[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{border:1px solid var(--dashboard2);border-radius:8px}.filterForm[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--main)}.filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible, .filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus-visible{box-shadow:none;outline:none}.filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{color:var(--main)}.filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#115a8b86}.filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-color:var(--dashboard2);color:var(--dashboard1);background-image:url(chevron-Down.243768823842f8ab.svg);background-size:30px 100%;background-position:left 0px}.card[_ngcontent-%COMP%]{box-shadow:0 3px 6px #0000001a}"]})}return r})();var F=a(553),A=a(4286);function Z(r,l){if(1&r&&(t.TgZ(0,"div",17),t._UZ(1,"img",18),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("src",e.previewUrl,t.LSH)}}function T(r,l){if(1&r&&(t.ynx(0),t.TgZ(1,"div",6)(2,"button",19),t._uU(3," \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0642\u0633\u0645 "),t.qZA()(),t.BQk()),2&r){const e=t.oxw();t.xp6(2),t.Q6J("disabled",!e.categoryForm.valid)}}function I(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"div",6)(1,"button",20),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.updateCategory())}),t._uU(2," \u062a\u0639\u062f\u064a\u0644 "),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("disabled",!e.categoryForm.valid)}}let h=(()=>{class r{constructor(e,o,n,s,c,S,U){this.catService=e,this.localize=o,this.router=n,this.activatedRoute=s,this._MessagesService=c,this.blogService=S,this.fb=U,this.isEditMode=!1,this.categoryId="",this.previewUrl=null,this.categoryForm=this.fb.group({title:["",i.kI.required],description:["",i.kI.required],image:[null,i.kI.required]})}ngOnInit(){this.activatedRoute.paramMap.subscribe(e=>{const o=e.get("id");o?(this.categoryId=o,this.isEditMode=!0,this.categoryForm.get("image")?.setValidators([]),this.categoryForm.get("image")?.updateValueAndValidity(),this.catService.GetCategoryById(o).subscribe(n=>{n&&n.data&&this.setFormValues(n.data)})):(this.blogService.initializeNavItems(),this.categoryForm.get("image")?.setValidators([i.kI.required]),this.categoryForm.get("image")?.updateValueAndValidity())})}setFormValues(e){this.categoryForm.controls.title.setValue(e.title),this.categoryForm.controls.description.setValue(e.description),e.image&&e.image.length>0&&(this.previewUrl=`${F.N.url}${e.image[0]}`)}get f(){return this.categoryForm.controls}onFileChange(e){if(e.target.files.length>0){const o=e.target.files[0];this.categoryForm.patchValue({image:o});const n=new FileReader;n.onload=()=>{this.previewUrl=n.result},n.readAsDataURL(o)}}navigateToCategoriesList(){const e=this.localize.translateRoute("/dashboard/categories");this.router.navigate([e])}updateCategory(){this.categoryForm.valid&&this.catService.UpdateCategory(this.categoryId,{title:this.categoryForm.controls.title.value,description:this.categoryForm.controls.description.value,image:this.categoryForm.controls.image.value,_method:"PATCH"}).subscribe({next:o=>{this._MessagesService.showSuccessMessage("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0642\u0633\u0645",3e3),this.navigateToCategoriesList()},error:o=>{console.error("Failed to edit category:",o)}})}onSubmit(){this.categoryForm.valid&&this.catService.AddCategory({title:this.categoryForm.controls.title.value,description:this.categoryForm.controls.description.value,image:this.categoryForm.controls.image.value}).subscribe({next:o=>{console.log("Category added successfully:",o),this.navigateToCategoriesList(),this._MessagesService.showSuccessMessage("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0642\u0633\u0645",3e3)},error:o=>{console.error("Failed to add category:",o)}})}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(f.G),t.Y36(u.An),t.Y36(d.F0),t.Y36(d.gz),t.Y36(A.K),t.Y36(p.Q),t.Y36(i.qu))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-add-category"]],standalone:!0,features:[t.jDz],decls:23,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],["id","pills-tabContent",1,"tab-content","p-3"],["id","addCategory","role","tabpanel","aria-labelledby","addCategory-tab","tabindex","0",1,""],[3,"formGroup","ngSubmit"],[1,"form-group","col-12","mb-3"],["for","title",1,"form-label"],["type","text","name","title","id","addCategoryName","formControlName","title",1,"form-control"],["for","addCategoryDesciption",1,"form-label"],["name","description","id","addCategoryDesciption","cols","30","rows","10","formControlName","description",1,"form-control"],[1,"form-group","col-12","mb-3","uploadImage"],["type","file","id","uploadCategoryImage","hidden","",3,"change"],["for","uploadCategoryImage",1,"py-5","text-center"],["class","text-center mt-2",4,"ngIf"],[4,"ngIf","ngIfElse"],["editButton",""],[1,"text-center","mt-2"],["alt","Image Preview",1,"img-thumbnail",3,"src"],["type","submit",1,"btn","px-5",3,"disabled"],["type","button",1,"btn","px-5",3,"disabled","click"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(6,"div",1)(7,"div",6)(8,"label",7),t._uU(9,"\u0627\u0633\u0645 \u0627\u0644\u0642\u0633\u0645*"),t.qZA(),t._UZ(10,"input",8),t.qZA(),t.TgZ(11,"div",6)(12,"label",9),t._uU(13,"\u0627\u0644\u0648\u0635\u0641"),t.qZA(),t._UZ(14,"textarea",10),t.qZA(),t.TgZ(15,"div",11)(16,"input",12),t.NdJ("change",function(c){return n.onFileChange(c)}),t.qZA(),t.TgZ(17,"label",13),t._uU(18,"\u0627\u062e\u062a\u0627\u0631 \u0627\u0644\u0645\u0644\u0641 \u0645\u0646 \u0627\u0644\u062c\u0647\u0627\u0632 \u0627\u0644\u062e\u0627\u0635 \u0628\u0643"),t.qZA(),t.YNc(19,Z,2,1,"div",14),t.qZA()(),t.YNc(20,T,4,1,"ng-container",15),t.YNc(21,I,3,1,"ng-template",null,16,t.W1O),t.qZA()()()()()()),2&o){const s=t.MAs(22);t.xp6(5),t.Q6J("formGroup",n.categoryForm),t.xp6(14),t.Q6J("ngIf",n.previewUrl),t.xp6(1),t.Q6J("ngIf",!n.isEditMode)("ngIfElse",s)}},dependencies:[g.ez,g.O5,i.u5,i._Y,i.Fj,i.JJ,i.JL,i.UX,i.sg,i.u],styles:[".tab-content[_ngcontent-%COMP%]{border-radius:4px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--dashboard1)}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible, form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus-visible{box-shadow:none;outline:none}form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:var(--main);color:#115a8b}form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#115a8b86}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-color:var(--main);color:var(--dashboard1);background-image:url(chevron-Down.243768823842f8ab.svg);background-size:30px 100%;background-position:left 0px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--main);color:#fff}form[_ngcontent-%COMP%]   .input-group-vertical[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%] + .input-group-text[_ngcontent-%COMP%]{color:var(--dashboard1);background-color:transparent;border:none}form[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:not(.d-inline-block){border:1px solid var(--main);color:var(--dashboard1);width:100%;border-radius:10px}"]})}return r})();const L=[{path:"",component:C,children:[{path:"",component:O},{path:"add-category",component:h,data:{breadcrumbs:[{label:" \u0625\u0636\u0627\u0641\u0629 \u0642\u0633\u0645",url:"/dashboard/categories/add-category"}]}},{path:"add-category/:id",component:h}]}]}}]);