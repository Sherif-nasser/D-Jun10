"use strict";(self.webpackChunkITSP=self.webpackChunkITSP||[]).push([[600],{1600:(Y,h,a)=>{a.r(h),a.d(h,{default:()=>N});var d=a(6814),_=a(8034),I=a(1818),M=a(2135),r=a(6223),f=a(8733),m=a(846),x=a(7728),t=a(5879),v=a(5401),g=a(9862),O=a(553);let b=(()=>{class o{constructor(e){this.http=e,this.InstitiutesListUrl=`${O.N.url}institute`}GetInstitiutesList(e){let n=new g.LE;return e&&Object.keys(e).forEach(i=>{n=n.append(i,e[i])}),this.http.get(this.InstitiutesListUrl,{params:n})}AddInstitute(e,n){let i=new g.LE;n&&Object.keys(n).forEach(s=>{i=i.append(s,n[s])});const u=new FormData;return Object.keys(e).forEach(s=>{u.append(s,e[s])}),this.http.post(this.InstitiutesListUrl,u,{params:i})}GetInstituteById(e){return this.http.get(`${this.InstitiutesListUrl}/${e}`)}UpdateInstitute(e,n,i){const u=`${this.InstitiutesListUrl}/${e}`;let s=new g.LE;i&&Object.keys(i).forEach(l=>{s=s.append(l,i[l])});const p=new FormData;return Object.keys(n).forEach(l=>{p.append(l,n[l])}),this.http.post(u,p,{params:s})}DeleteInstitute(e){return this.http.delete(`${this.InstitiutesListUrl}/${e}`)}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(g.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var P=a(7700);function F(o,c){1&o&&(t.TgZ(0,"div",25)(1,"p"),t._uU(2,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),t.qZA()())}const Z=function(o,c){return[o,c]};function A(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"div",15)(5,"h5",16),t._uU(6),t.qZA(),t.TgZ(7,"p",17),t._UZ(8,"app-truncate-text",18),t.qZA()(),t.TgZ(9,"div",19)(10,"a",20),t.ALo(11,"localize"),t._uU(12,"\u062a\u0639\u062f\u064a\u0644 "),t._UZ(13,"i",21),t.qZA(),t.TgZ(14,"button",22),t.NdJ("click",function(){const u=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.deleteinstitute(u.id,u.name))}),t._uU(15," \u062d\u0630\u0641 "),t._UZ(16,"i",23),t.qZA()()()()(),t.YNc(17,F,3,0,"div",24),t.ALo(18,"filter"),t.qZA()}if(2&o){const e=c.$implicit,n=t.oxw();t.xp6(6),t.Oqu(e.name),t.xp6(2),t.Q6J("text",e.description)("limit",100),t.xp6(2),t.Q6J("routerLink",t.WLB(10,Z,t.lcZ(11,5,"/dashboard/institutes/add-institute"),e.id)),t.xp6(7),t.Q6J("ngIf",0===t.xi3(18,7,n.institutes,n.searchQuery).length&&!n.loading)}}let T=(()=>{class o{constructor(e,n,i){this.blogService=e,this.institutesService=n,this.dialog=i,this.institutes=[],this.searchQuery="",this.loading=!1}ngOnInit(){this.blogService.initializeNavItems(),this.getInstitutesList()}getInstitutesList(e=1){this.loading=!0,this.institutesService.GetInstitiutesList({page:e}).subscribe({next:n=>{this.loading=!1,this.institutes=n.data.data},error:n=>{this.loading=!1,console.error("Error in Institutes list",n)}})}deleteinstitute(e,n){this.dialog.open(_.$,{width:"500px",data:{title:"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062d\u0630\u0641",message:`\u061f ${n} \u0647\u0644 \u062a\u0631\u064a\u062f \u062d\u0630\u0641  `}}).afterClosed().subscribe(u=>{u&&this.institutesService.DeleteInstitute(e.toString()).subscribe({next:s=>{this.getInstitutesList()},error:s=>{console.error("There was an error deleting the Institute!",s)}})})}onPageChange(e){this.getInstitutesList(e)}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(v.Q),t.Y36(b),t.Y36(P.uw))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-institutes-list"]],standalone:!0,features:[t.jDz],decls:14,vars:7,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],[1,"mb-4","filterForm"],[1,"col-lg-4","col-md-6","mb-lg-2","mb-2"],[1,"input-group"],[1,"btn"],[1,"fa-solid","fa-magnifying-glass"],["type","search","name","search","id","search",1,"form-control",3,"ngModel","ngModelChange"],["class","col-md-6 mb-1",4,"ngFor","ngForOf"],[3,"currentPage","totalPages","pageChange"],[1,"col-md-6","mb-1"],[1,"card","mb-3","border-0"],[1,"card-body"],[1,"row","mb-2"],[1,"col-xl-7","col-md-8","mb-md-0","mb-2"],[1,"card-title"],[1,"card-text"],[3,"text","limit"],[1,"col-xl-5","col-md-4","mb-md-0","mb-2","text-md-end","text-center"],[1,"btn","px-4","mx-1","edit",3,"routerLink"],[1,"fa-regular","fa-pen-to-square"],[1,"btn","delete","px-4",3,"click"],[1,"fa-regular","fa-trash-can"],["class","text-center",4,"ngIf"],[1,"text-center"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",1)(5,"div",4)(6,"div",5)(7,"button",6),t._UZ(8,"i",7),t.qZA(),t.TgZ(9,"input",8),t.NdJ("ngModelChange",function(s){return i.searchQuery=s}),t.qZA()()()()(),t.TgZ(10,"div",1),t.YNc(11,A,19,13,"div",9),t.ALo(12,"filter"),t.qZA(),t.TgZ(13,"pagination",10),t.NdJ("pageChange",function(s){return i.onPageChange(s)}),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("ngModel",i.searchQuery),t.xp6(2),t.Q6J("ngForOf",t.xi3(12,4,i.institutes,i.searchQuery)),t.xp6(2),t.Q6J("currentPage",i.currentPage)("totalPages",i.totalPages))},dependencies:[d.ez,d.sg,d.O5,I.Q,M.u,r.u5,r._Y,r.Fj,r.JJ,r.JL,r.On,r.F,f.fQ,f.lO,m.rH,x.H],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 3px 6px #0000001a}a.edit[_ngcontent-%COMP%]{background-color:var(--stroke-color2);color:var(--main)}button.delete[_ngcontent-%COMP%]{background-color:var(--danger);color:#fff}.filterForm[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{border:1px solid var(--dashboard2);border-radius:8px}.filterForm[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--main)}.filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible, .filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus-visible{box-shadow:none;outline:none}.filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{color:var(--main)}.filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#115a8b86}.filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-color:var(--dashboard2);color:var(--dashboard1);background-image:url(chevron-Down.243768823842f8ab.svg);background-size:30px 100%;background-position:left 0px}"]})}return o})(),y=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-mainn-institutes"]],standalone:!0,features:[t.jDz],decls:1,vars:0,template:function(n,i){1&n&&t._UZ(0,"router-outlet")},dependencies:[d.ez,m.lC]})}return o})();var L=a(4286);function U(o,c){1&o&&(t.TgZ(0,"div",14),t._uU(1," \u0627\u0644\u0627\u0633\u0645 \u0645\u0637\u0644\u0648\u0628 "),t.qZA())}function S(o,c){1&o&&(t.TgZ(0,"div",14),t._uU(1," \u0627\u0644\u0648\u0635\u0641 \u0645\u0637\u0644\u0648\u0628 "),t.qZA())}function J(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"div",6)(2,"button",15),t._uU(3," \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0624\u0633\u0633\u0629 "),t.qZA()(),t.BQk()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("disabled",!e.instituteForm.valid)}}function Q(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",6)(1,"button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.updateInstitute())}),t._uU(2," \u062a\u0639\u062f\u064a\u0644 "),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("disabled",!e.instituteForm.valid)}}let C=(()=>{class o{constructor(e,n,i,u,s,p,l){this.instituteService=e,this.localize=n,this.router=i,this.activatedRoute=u,this._MessagesService=s,this.blogService=p,this.fb=l,this.isEditMode=!1,this.instituteId="",this.instituteForm=this.fb.group({name:["",r.kI.required],description:["",r.kI.required]})}ngOnInit(){this.activatedRoute.paramMap.subscribe(e=>{const n=e.get("id");n?(this.instituteId=n,this.isEditMode=!0,this.instituteService.GetInstituteById(n).subscribe(i=>{i&&i.data&&this.setFormValues(i.data)})):this.blogService.initializeNavItems()})}setFormValues(e){this.instituteForm.controls.name.setValue(e.name),this.instituteForm.controls.description.setValue(e.description)}get f(){return this.instituteForm.controls}navigateToInstitutesList(){const e=this.localize.translateRoute("/dashboard/institutes");this.router.navigate([e])}updateInstitute(){this.instituteForm.valid&&this.instituteService.UpdateInstitute(this.instituteId,{name:this.instituteForm.controls.name.value,description:this.instituteForm.controls.description.value,_method:"PATCH"}).subscribe({next:n=>{this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u062a\u062d\u062f\u064a\u062b",3e3),this.navigateToInstitutesList()},error:n=>{console.error("Failed to edit institute:",n)}})}onSubmit(){this.instituteForm.valid&&this.instituteService.AddInstitute({name:this.instituteForm.controls.name.value,description:this.instituteForm.controls.description.value}).subscribe({next:n=>{this.navigateToInstitutesList(),this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u0625\u0636\u0627\u0641\u0629",3e3)},error:n=>{console.error("Failed to add institute:",n)}})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(b),t.Y36(f.An),t.Y36(m.F0),t.Y36(m.gz),t.Y36(L.K),t.Y36(v.Q),t.Y36(r.qu))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-institutes"]],standalone:!0,features:[t.jDz],decls:20,vars:5,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],["id","pills-tabContent",1,"tab-content","p-3"],["id","addInistitutes","role","tabpanel","aria-labelledby","addInistitutes-tab","tabindex","0",1,""],[3,"formGroup","ngSubmit"],[1,"form-group","col-12","mb-3"],["for","addInstituteName",1,"form-label"],["type","text","name","name","id","addInstituteName","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","addInstituteDesciption",1,"form-label"],["name","description","id","addInstituteDesciption","cols","30","rows","10","formControlName","description",1,"form-control"],[4,"ngIf","ngIfElse"],["editButton",""],[1,"text-danger"],["type","submit",1,"btn","px-5",3,"disabled"],["type","button",1,"btn","px-5",3,"disabled","click"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(6,"div",1)(7,"div",6)(8,"label",7),t._uU(9,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0624\u0633\u0633\u0629*"),t.qZA(),t._UZ(10,"input",8),t.YNc(11,U,2,0,"div",9),t.qZA(),t.TgZ(12,"div",6)(13,"label",10),t._uU(14,"\u0627\u0644\u0648\u0635\u0641"),t.qZA(),t._UZ(15,"textarea",11),t.YNc(16,S,2,0,"div",9),t.qZA()(),t.YNc(17,J,4,1,"ng-container",12),t.YNc(18,Q,3,1,"ng-template",null,13,t.W1O),t.qZA()()()()()()),2&n){const u=t.MAs(19);t.xp6(5),t.Q6J("formGroup",i.instituteForm),t.xp6(6),t.Q6J("ngIf",i.instituteForm.controls.name.invalid&&(i.instituteForm.controls.name.dirty||i.instituteForm.controls.name.touched)),t.xp6(5),t.Q6J("ngIf",i.instituteForm.controls.description.invalid&&(i.instituteForm.controls.description.dirty||i.instituteForm.controls.description.touched)),t.xp6(1),t.Q6J("ngIf",!i.isEditMode)("ngIfElse",u)}},dependencies:[d.ez,d.O5,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,r.u5],styles:[".tab-content[_ngcontent-%COMP%]{border-radius:4px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--dashboard1)}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible, form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus-visible{box-shadow:none;outline:none}form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:var(--main);color:#115a8b}form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#115a8b86}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-color:var(--main);color:var(--dashboard1);background-image:url(chevron-Down.243768823842f8ab.svg);background-size:30px 100%;background-position:left 0px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--main);color:#fff}form[_ngcontent-%COMP%]   .input-group-vertical[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%] + .input-group-text[_ngcontent-%COMP%]{color:var(--dashboard1);background-color:transparent;border:none}form[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:not(.d-inline-block){border:1px solid var(--main);color:var(--dashboard1);width:100%;border-radius:10px}"]})}return o})();const N=[{path:"",component:y,children:[{path:"",component:T},{path:"add-institute",component:C,data:{breadcrumbs:[{label:" \u0625\u0636\u0627\u0641\u0629 \u0645\u0624\u0633\u0633\u0629",url:"/dashboard/categories/add-category"}]}},{path:"add-institute/:id",component:C}]}]}}]);