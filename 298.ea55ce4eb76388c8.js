"use strict";(self.webpackChunkITSP=self.webpackChunkITSP||[]).push([[298],{5298:(Z,k,a)=>{a.r(k),a.d(k,{default:()=>T});var u=a(6814),r=a(6223),t=a(5879),g=a(9862),p=a(553),S=a(6996);let v=(()=>{class i{constructor(n,e){this.http=n,this.navService=e,this.skillsListUrl=`${p.N.elitersUrl}skills`,this.createSkillUrl=`${p.N.elitersUrl}skill/create`,this.showSkillUrl=`${p.N.elitersUrl}skill/show`,this.updateSkillUrl=`${p.N.elitersUrl}skill/update`,this.deleteSkillUrl=`${p.N.elitersUrl}skill/delete`}initializeNavItems(){this.navService.setNavItems([{name:"\u0639\u0631\u0636 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0647\u0627\u0631\u0627\u062a",routerLink:"/dashboard/skills"},{name:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0647\u0627\u0631\u0629",routerLink:"/dashboard/skills/add"}])}GetSkillsList(n){let e=new g.LE;return n&&Object.keys(n).forEach(o=>{e=e.append(o,n[o])}),this.http.get(this.skillsListUrl,{params:e})}GetSkillById(n){let e=new g.LE;return n&&Object.keys(n).forEach(o=>{e=e.append(o,n[o])}),this.http.get(this.showSkillUrl,{params:e})}AddSkill(n,e){let o=new g.LE;e&&Object.keys(e).forEach(l=>{o=o.append(l,e[l])});const s=new FormData;return Object.keys(n).forEach(l=>{s.append(l,n[l])}),this.http.post(this.createSkillUrl,s,{params:o})}UpdateSkill(n,e,o){const s=this.updateSkillUrl;let l=new g.LE;o&&Object.keys(o).forEach(c=>{l=l.append(c,o[c])});const d=new FormData;return Object.keys(e).forEach(c=>{d.append(c,e[c])}),this.http.post(s,d,{params:l})}DeleteSkill(n,e,o){const s=this.deleteSkillUrl;let l=new g.LE;o&&Object.keys(o).forEach(c=>{l=l.append(c,o[c])});const d=new FormData;return Object.keys(e).forEach(c=>{d.append(c,e[c])}),this.http.post(s,d,{params:l})}static#t=this.\u0275fac=function(e){return new(e||i)(t.LFG(g.eN),t.LFG(S.f))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var f=a(8733),h=a(846),b=a(4286);function _(i,m){if(1&i&&(t.ynx(0),t.TgZ(1,"div",6)(2,"button",11),t._uU(3," \u0625\u0636\u0627\u0641\u0629 \u0645\u0647\u0627\u0631\u0629 "),t.qZA()(),t.BQk()),2&i){const n=t.oxw();t.xp6(2),t.Q6J("disabled",!n.skillForm.valid)}}function M(i,m){if(1&i){const n=t.EpF();t.TgZ(0,"div",6)(1,"button",12),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.updateSkill())}),t._uU(2," \u062a\u0639\u062f\u064a\u0644 "),t.qZA()()}if(2&i){const n=t.oxw();t.xp6(1),t.Q6J("disabled",!n.skillForm.valid)}}let C=(()=>{class i{constructor(n,e,o,s,l,d){this.skillsService=n,this.localize=e,this.router=o,this.activatedRoute=s,this._MessagesService=l,this.fb=d,this.isEditMode=!1,this.skillId="",this.skillForm=this.fb.group({name:["",r.kI.required]})}ngOnInit(){this.activatedRoute.paramMap.subscribe(n=>{const e=n.get("id");e&&(this.skillId=e,this.isEditMode=!0,this.skillsService.GetSkillById({skill_id:e}).subscribe(s=>{s&&s.data&&this.setFormValues(s.data)}))}),this.prepareNavItems()}prepareNavItems(){this.skillsService.initializeNavItems()}setFormValues(n){this.skillForm.controls.name.setValue(n.name),console.log(this.skillForm.controls.name.value)}get f(){return this.skillForm.controls}navigateToSkillsList(){const n=this.localize.translateRoute("/dashboard/skills");this.router.navigate([n])}updateSkill(){this.skillForm.valid&&this.skillsService.UpdateSkill(this.skillId,{skill_id:this.skillId,name:this.skillForm.controls.name.value}).subscribe({next:e=>{this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u062a\u062d\u062f\u064a\u062b",3e3),this.navigateToSkillsList()},error:e=>{console.error("Failed to edit skill:",e)}})}onSubmit(){this.skillForm.valid&&this.skillsService.AddSkill({name:this.skillForm.controls.name.value}).subscribe({next:e=>{console.log("Skill added successfully:",e),this.navigateToSkillsList(),this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u0625\u0636\u0627\u0641\u0629",3e3)},error:e=>{console.error("Failed to add skill:",e)}})}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(v),t.Y36(f.An),t.Y36(h.F0),t.Y36(h.gz),t.Y36(b.K),t.Y36(r.qu))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-skill"]],standalone:!0,features:[t.jDz],decls:14,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],["id","pills-tabContent",1,"tab-content","p-3"],["id","addSkill","role","tabpanel","aria-labelledby","addSkill-tab","tabindex","0",1,""],[3,"formGroup","ngSubmit"],[1,"form-group","col-12","mb-3"],["for","name",1,"form-label"],["type","text","name","name","id","name","formControlName","name",1,"form-control"],[4,"ngIf","ngIfElse"],["editButton",""],["type","submit",1,"btn","px-5",3,"disabled"],["type","button",1,"btn","px-5",3,"disabled","click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(6,"div",1)(7,"div",6)(8,"label",7),t._uU(9,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0647\u0627\u0631\u0629"),t.qZA(),t._UZ(10,"input",8),t.qZA()(),t.YNc(11,_,4,1,"ng-container",9),t.YNc(12,M,3,1,"ng-template",null,10,t.W1O),t.qZA()()()()()()),2&e){const s=t.MAs(13);t.xp6(5),t.Q6J("formGroup",o.skillForm),t.xp6(6),t.Q6J("ngIf",!o.isEditMode)("ngIfElse",s)}},dependencies:[u.ez,u.O5,r.u5,r._Y,r.Fj,r.JJ,r.JL,r.UX,r.sg,r.u],styles:[".tab-content[_ngcontent-%COMP%]{border-radius:4px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--dashboard1)}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible, form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus-visible{box-shadow:none;outline:none}form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:var(--main);color:#115a8b}form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#115a8b86}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-color:var(--main);color:var(--dashboard1);background-image:url(chevron-Down.243768823842f8ab.svg);background-size:30px 100%;background-position:left 0px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--main);color:#fff}form[_ngcontent-%COMP%]   .input-group-vertical[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%] + .input-group-text[_ngcontent-%COMP%]{color:var(--dashboard1);background-color:transparent;border:none}"]})}return i})(),O=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-main-skills"]],standalone:!0,features:[t.jDz],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},dependencies:[u.ez,h.lC]})}return i})();var P=a(8034),x=a(1818),F=a(2135),L=a(7700);const y=function(i,m){return[i,m]};function A(i,m){if(1&i){const n=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16)(5,"a",17)(6,"h5",18),t._uU(7),t.qZA()()(),t.TgZ(8,"div",19)(9,"a",20),t.ALo(10,"localize"),t._uU(11,"\u062a\u0639\u062f\u064a\u0644"),t.qZA(),t.TgZ(12,"button",21),t.NdJ("click",function(){const s=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.deleteSkill(s.id,s.name))}),t._uU(13," \u062d\u0630\u0641 "),t.qZA()()()()()()}if(2&i){const n=m.$implicit;t.xp6(7),t.hij(" ",n.name," "),t.xp6(2),t.Q6J("routerLink",t.WLB(4,y,t.lcZ(10,2,"/dashboard/skills/edit"),n.id))}}function w(i,m){1&i&&(t.TgZ(0,"div",22)(1,"p"),t._uU(2,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),t.qZA()())}const T=[{path:"",component:O,children:[{path:"",component:(()=>{class i{constructor(n,e,o,s,l){this.router=n,this.localize=e,this.dialog=o,this._MessagesService=s,this.skillsService=l,this.loading=!1,this.skillsList=[],this.searchQuery=""}ngOnInit(){this.getSkillsList(),this.prepareNavItems()}prepareNavItems(){this.skillsService.initializeNavItems()}getSkillsList(n=1){this.loading=!0,this.skillsService.GetSkillsList({page:n}).subscribe({next:e=>{this.currentPage=e.pagination.current_page,this.totalPages=e.pagination.last_page,this.skillsList=e.data,this.loading=!1,console.log(this.skillsList)},error:e=>{console.error("Failed to fetch skills list:",e),this.loading=!1}})}deleteSkill(n,e){const o={skill_id:n};this.dialog.open(P.$,{width:"500px",data:{title:"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062d\u0630\u0641",message:`\u061f ${e} \u0647\u0644 \u062a\u0631\u064a\u062f \u062d\u0630\u0641  `}}).afterClosed().subscribe(l=>{l&&this.skillsService.DeleteSkill(n.toString(),o).subscribe({next:d=>{this.getSkillsList()},error:d=>{console.error("There was an error deleting the skill!",d)}})})}viewSkill(n){if(n){const e=this.localize.translateRoute("/dashboard/skills/view");this.router.navigate([e,n.id])}else console.error("No skill to view")}onPageChange(n){this.getSkillsList(n)}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(h.F0),t.Y36(f.An),t.Y36(L.uw),t.Y36(b.K),t.Y36(v))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-skills-list"]],standalone:!0,features:[t.jDz],decls:16,vars:11,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],[1,"mb-2","filterForm"],[1,"col-lg-4","col-md-6","mb-lg-2","mb-2"],[1,"input-group"],[1,"btn"],[1,"fa-solid","fa-magnifying-glass"],["type","search","name","search","id","search",1,"form-control",3,"ngModel","ngModelChange"],["class","col-md-6 mb-2",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[3,"currentPage","totalPages","pageChange"],[1,"col-md-6","mb-2"],[1,"card","mb-3","border-0"],[1,"card-body"],[1,"row","mb-2"],[1,"col-xl-7","col-md-8","order-md-1","order-2",2,"cursor","pointer"],[1,"text-reset","text-decoration-none"],[1,"card-title"],[1,"col-xl-5","col-md-4","order-md-2","order-1","mb-md-0","mb-2","text-end"],[1,"btn","px-4","mx-1","edit",3,"routerLink"],[1,"btn","delete","px-4",3,"click"],[1,"text-center"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",1)(5,"div",4)(6,"div",5)(7,"button",6),t._UZ(8,"i",7),t.qZA(),t.TgZ(9,"input",8),t.NdJ("ngModelChange",function(l){return o.searchQuery=l}),t.qZA()()()()(),t.TgZ(10,"div",1),t.YNc(11,A,14,7,"div",9),t.ALo(12,"filter"),t.YNc(13,w,3,0,"div",10),t.ALo(14,"filter"),t.qZA(),t.TgZ(15,"pagination",11),t.NdJ("pageChange",function(l){return o.onPageChange(l)}),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("ngModel",o.searchQuery),t.xp6(2),t.Q6J("ngForOf",t.xi3(12,5,o.skillsList,o.searchQuery)),t.xp6(2),t.Q6J("ngIf",0===t.xi3(14,8,o.skillsList,o.searchQuery).length&&!o.loading),t.xp6(2),t.Q6J("currentPage",o.currentPage)("totalPages",o.totalPages))},dependencies:[u.ez,u.sg,u.O5,r.u5,r._Y,r.Fj,r.JJ,r.JL,r.On,r.F,h.rH,x.Q,F.u,f.fQ,f.lO],styles:[".tabs[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{box-shadow:0 3px 6px #0000001a;color:var(--dashboard1)}button.delete[_ngcontent-%COMP%]{background-color:var(--danger);color:#fff}a.show[_ngcontent-%COMP%]{background-color:var(--main);color:#fff}a.edit[_ngcontent-%COMP%]{background-color:var(--stroke-color2);color:var(--main)}.filterForm[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{border:1px solid var(--dashboard2);border-radius:8px}.filterForm[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--main)}.filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible, .filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus-visible{box-shadow:none;outline:none}.filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{color:var(--main)}.filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#115a8b86}.filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-color:var(--dashboard2);color:var(--dashboard1);background-image:url(chevron-Down.243768823842f8ab.svg);background-size:30px 100%;background-position:left 0px}"]})}return i})()},{path:"view/:id",component:(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-view-skill"]],standalone:!0,features:[t.jDz],decls:2,vars:0,template:function(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"view-skill works!"),t.qZA())},dependencies:[u.ez]})}return i})()},{path:"add",component:C},{path:"edit/:id",component:C}]}]}}]);