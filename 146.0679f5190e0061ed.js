"use strict";(self.webpackChunkITSP=self.webpackChunkITSP||[]).push([[146],{146:(G,b,l)=>{l.r(b),l.d(b,{default:()=>$});var p=l(6814),d=l(846),e=l(5879);let F=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-main-corporates"]],standalone:!0,features:[e.jDz],decls:1,vars:0,template:function(o,r){1&o&&e._UZ(0,"router-outlet")},dependencies:[p.ez,d.lC]})}return i})();var s=l(6223),y=l(2135),m=l(8733),T=l(1818),U=l(8034),h=l(9862),v=l(553),L=l(6996);let C=(()=>{class i{constructor(t,o){this.http=t,this.navService=o,this.corporateListUrl=`${v.N.elitersUrl}corporates`,this.updateCorporateUrl=`${v.N.elitersUrl}corporate/update`,this.showCorporateUrl=`${v.N.elitersUrl}corporate/show`,this.deleteCorporateUrl=`${v.N.elitersUrl}corporate/delete`}initializeNavItems(){this.navService.setNavItems([{name:"\u0639\u0631\u0636 \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0631\u0643\u0627\u062a",routerLink:"/dashboard/corporates"}])}getCorporatesList(t){let o=new h.LE;return t&&Object.keys(t).forEach(r=>{o=o.append(r,t[r])}),this.http.get(this.corporateListUrl,{params:o})}GetCorporateById(t,o){let r=new h.LE;return o&&Object.keys(o).forEach(a=>{r=r.append(a,o[a])}),this.http.get(this.showCorporateUrl,{params:r})}AddCorporate(t,o){let r=new h.LE;o&&Object.keys(o).forEach(n=>{r=r.append(n,o[n])});const a=new FormData;return Object.keys(t).forEach(n=>{Array.isArray(t[n])?t[n].forEach((c,g)=>{a.append(`${n}[${g}]`,c)}):a.append(n,t[n])}),this.http.post(this.updateCorporateUrl,a,{params:r})}UpdateCorporate(t,o,r){let a=new h.LE;r&&Object.keys(r).forEach(c=>{a=a.append(c,r[c])});const n=new FormData;return Object.keys(o).forEach(c=>{Array.isArray(o[c])?o[c].forEach((g,f)=>{n.append(`${c}[${f}]`,g)}):n.append(c,o[c])}),this.http.post(this.updateCorporateUrl,n,{params:a})}DeleteCorporate(t,o){const r=new FormData;return Object.keys(o).forEach(a=>{Array.isArray(o[a])?o[a].forEach((n,c)=>{r.append(`${a}[${c}]`,n)}):r.append(a,o[a])}),this.http.post(this.deleteCorporateUrl,r)}static#e=this.\u0275fac=function(o){return new(o||i)(e.LFG(h.eN),e.LFG(L.f))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var A=l(7700),_=l(4286);const w=function(i,u){return[i,u]},q=function(i){return{color:i}};function I(i,u){if(1&i){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15),e._UZ(4,"img",16),e.qZA(),e.TgZ(5,"div",17)(6,"div",18)(7,"div",1)(8,"div",19),e.NdJ("click",function(){const a=e.CHM(t).$implicit,n=e.oxw();return e.KtG(n.viewCorporate(a))}),e.TgZ(9,"h4",20),e._uU(10),e.qZA()(),e.TgZ(11,"div",21)(12,"a",22),e.ALo(13,"localize"),e._uU(14,"\u062a\u0639\u062f\u064a\u0644"),e.qZA(),e.TgZ(15,"button",23),e.NdJ("click",function(){const a=e.CHM(t).$implicit,n=e.oxw();return e.KtG(n.acceptCompany(a))}),e._uU(16," \u0642\u0628\u0648\u0644 "),e.qZA()()(),e.TgZ(17,"ul")(18,"li"),e._uU(19),e.qZA(),e.TgZ(20,"li"),e._uU(21),e.qZA(),e.TgZ(22,"li"),e._uU(23," \u0627\u0644\u062d\u0627\u0644\u0629:"),e.TgZ(24,"span",24),e._uU(25),e.qZA()()()()()()()()}if(2&i){const t=u.$implicit;e.xp6(4),e.Q6J("src",t.logo,e.LSH)("alt",t.name+" Article Image"),e.xp6(6),e.hij(" ",t.name," "),e.xp6(2),e.Q6J("routerLink",e.WLB(10,w,e.lcZ(13,8,"/dashboard/corporates/add-corporate"),t.id)),e.xp6(7),e.hij("\u0627\u0644\u0628\u0644\u062f: ",t.country,""),e.xp6(2),e.hij("\u0627\u0644\u0645\u062f\u064a\u0646\u0629: ",t.city,""),e.xp6(3),e.Q6J("ngStyle",e.VKq(13,q,"Active"!==t.status?"red":"green")),e.xp6(1),e.hij(" ",t.status,"")}}function M(i,u){1&i&&(e.TgZ(0,"div",25)(1,"p"),e._uU(2,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),e.qZA()())}let O=(()=>{class i{constructor(t,o,r,a,n){this.router=t,this.localize=o,this.corporateService=r,this.dialog=a,this._MessagesService=n,this.loading=!1,this.corporatesList=[],this.searchQuery=""}ngOnInit(){this.getCorporatesList(),this.prepareNavBar()}prepareNavBar(){this.corporateService.initializeNavItems()}getCorporatesList(t=1){this.loading=!0,this.corporateService.getCorporatesList({page:t}).subscribe({next:o=>{this.currentPage=o.pagination.current_page,this.totalPages=o.pagination.last_page,this.corporatesList=o.data,this.loading=!1}})}updateCorporate(t){if(t){const o={phone:t.phone,corporate_id:t.id,name:t.name,tax_register:t.tax_register,commercial_record:t.commercial_record,country:t.country,city:t.city,address:t.address,logo:t.logo,password:t.password,email:t.email,status:"Active",owner_title:t.owner_title};delete o.logo,this.corporateService.UpdateCorporate(t.id,o).subscribe({next:r=>{this._MessagesService.showSuccessMessage("\u062a\u0645 \u0642\u0628\u0648\u0644 \u0627\u0644\u0634\u0631\u0643\u0629",3e3),this.getCorporatesList()},error:r=>{console.error("Failed to update corporate:",r)}})}}onPageChange(t){this.getCorporatesList(t)}viewCorporate(t){if(t){const o=this.localize.translateRoute("/dashboard/corporates/view-corporate");this.router.navigate([o,t.id])}}acceptCompany(t){this.updateCorporate(t)}deleteCorporate(t,o){const r={corporate_id:t};this.dialog.open(U.$,{width:"500px",data:{title:"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062d\u0630\u0641",message:`\u061f ${o} \u0647\u0644 \u062a\u0631\u064a\u062f \u062d\u0630\u0641  `}}).afterClosed().subscribe(n=>{n&&this.corporateService.DeleteCorporate(t.toString(),r).subscribe({next:c=>{this.getCorporatesList()},error:c=>{console.error("There was an error deleting the admin!",c)}})})}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(d.F0),e.Y36(m.An),e.Y36(C),e.Y36(A.uw),e.Y36(_.K))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-corporates-list"]],standalone:!0,features:[e.jDz],decls:16,vars:11,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],[1,"mb-2","filterForm"],[1,"col-lg-7","mb-lg-2","mb-2"],[1,"input-group"],[1,"btn"],[1,"fa-solid","fa-magnifying-glass"],["type","search","name","search","id","search",1,"form-control",3,"ngModel","ngModelChange"],["class","col-md-6 mb-1",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[3,"currentPage","totalPages","pageChange"],[1,"col-md-6","mb-1"],[1,"card","mb-3","border-0"],[1,"row","g-0","align-items-center"],[1,"col-md-3","p-2","text-center"],[1,"img-fluid","rounded-start",2,"height","200px","object-fit","cover",3,"src","alt"],[1,"col-md-9"],[1,"card-body"],[1,"col-md-6","order-md-1","order-2",2,"cursor","pointer",3,"click"],[1,"card-title"],[1,"col-md-6","order-md-2","order-1","mb-md-0","mb-2","text-end"],[1,"btn","mx-2","px-4","edit",3,"routerLink"],[1,"btn","btn-success","px-4",3,"click"],[3,"ngStyle"],[1,"text-center"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",1)(5,"div",4)(6,"div",5)(7,"button",6),e._UZ(8,"i",7),e.qZA(),e.TgZ(9,"input",8),e.NdJ("ngModelChange",function(n){return r.searchQuery=n}),e.qZA()()()()(),e.TgZ(10,"div",1),e.YNc(11,I,26,15,"div",9),e.ALo(12,"filter"),e.YNc(13,M,3,0,"div",10),e.ALo(14,"filter"),e.qZA(),e.TgZ(15,"pagination",11),e.NdJ("pageChange",function(n){return r.onPageChange(n)}),e.qZA()()()()),2&o&&(e.xp6(9),e.Q6J("ngModel",r.searchQuery),e.xp6(2),e.Q6J("ngForOf",e.xi3(12,5,r.corporatesList,r.searchQuery)),e.xp6(2),e.Q6J("ngIf",0===e.xi3(14,8,r.corporatesList,r.searchQuery).length&&!r.loading),e.xp6(2),e.Q6J("currentPage",r.currentPage)("totalPages",r.totalPages))},dependencies:[p.ez,p.sg,p.O5,p.PC,s.u5,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F,y.u,d.Bz,d.rH,m.fQ,m.lO,T.Q],styles:[".tabs[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{box-shadow:0 3px 6px #0000001a;color:var(--dashboard1)}button.delete[_ngcontent-%COMP%]{background-color:var(--danger);color:#fff}a.show[_ngcontent-%COMP%]{background-color:var(--main);color:#fff}a.edit[_ngcontent-%COMP%]{background-color:var(--stroke-color2);color:var(--main)}.filterForm[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{border:1px solid var(--dashboard2);border-radius:8px}.filterForm[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--main)}.filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible, .filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus-visible{box-shadow:none;outline:none}.filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{color:var(--main)}.filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#115a8b86}.filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-color:var(--dashboard2);color:var(--dashboard1);background-image:url(chevron-Down.243768823842f8ab.svg);background-size:30px 100%;background-position:left 0px}"]})}return i})();var Z=l(5123),x=l(9172);const S=["fileInput"];function N(i,u){if(1&i&&e._UZ(0,"img",39),2&i){const t=e.oxw();e.Q6J("src",t.logoUrl,e.LSH)}}function P(i,u){if(1&i){const t=e.EpF();e.TgZ(0,"i",40),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.removeLogo())}),e.qZA()}}function k(i,u){if(1&i){const t=e.EpF();e.TgZ(0,"div",41),e.NdJ("click",function(){e.CHM(t),e.oxw();const r=e.MAs(12);return e.KtG(r.click())}),e._UZ(1,"i",42),e.qZA()}}function J(i,u){if(1&i&&(e.TgZ(0,"option",43),e._uU(1),e.qZA()),2&i){const t=u.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function Y(i,u){if(1&i&&(e.TgZ(0,"option",43),e._uU(1),e.qZA()),2&i){const t=u.$implicit,o=e.oxw();e.Q6J("value",t.id==o.addCorporateForm.controls.country.value?t.id:o.addCorporateForm.controls.country.value),e.xp6(1),e.hij(" ",t.name==o.addCorporateForm.controls.country.value?t.name:o.addCorporateForm.controls.country.value," ")}}function j(i,u){if(1&i&&(e.TgZ(0,"option",43),e._uU(1),e.qZA()),2&i){const t=u.$implicit,o=e.oxw();e.Q6J("value",t.id==o.addCorporateForm.controls.city.value?t.id:o.addCorporateForm.controls.city.value),e.xp6(1),e.hij(" ",t.name==o.addCorporateForm.controls.city.value?t.name:o.addCorporateForm.controls.city.value," ")}}const Q=function(i){return[i]},E=function(i){return[i]};function D(i,u){if(1&i&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10),e._UZ(3,"img",11),e.qZA(),e.TgZ(4,"div",12)(5,"div",13)(6,"div",1)(7,"div",14)(8,"a",15),e.ALo(9,"localize"),e._uU(10,"\u0631\u062c\u0648\u0639"),e.qZA()()(),e.TgZ(11,"div",16)(12,"ul")(13,"li"),e._uU(14),e.qZA(),e.TgZ(15,"li"),e._uU(16),e.qZA(),e.TgZ(17,"li"),e._uU(18),e.qZA(),e.TgZ(19,"li"),e._uU(20),e.qZA(),e.TgZ(21,"li"),e._uU(22),e.qZA(),e.TgZ(23,"li"),e._uU(24),e.qZA(),e.TgZ(25,"li"),e._uU(26),e.qZA(),e.TgZ(27,"li"),e._uU(28),e.qZA(),e.TgZ(29,"li"),e._uU(30),e.qZA()()()()()()()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("src",t.logoUrl||"./assets/images/corporateLogo.png",e.LSH),e.xp6(5),e.Q6J("routerLink",e.VKq(13,E,e.lcZ(9,11,"/dashboard/corporates"))),e.xp6(6),e.hij("\u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629: ",t.corporate.name,""),e.xp6(2),e.hij("\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a: ",t.corporate.tax_register,""),e.xp6(2),e.hij(" \u0627\u0644\u0633\u062c\u0644 \u0627\u0644\u062a\u062c\u0627\u0631\u064a: ",t.corporate.commercial_record," "),e.xp6(2),e.hij("\u0627\u0644\u0628\u0644\u062f: ",t.corporate.country,""),e.xp6(2),e.hij("\u0627\u0644\u0645\u062f\u064a\u0646\u0629: ",t.corporate.city,""),e.xp6(2),e.hij("\u0627\u0644\u0639\u0646\u0648\u0627\u0646: ",t.corporate.address,""),e.xp6(2),e.hij("\u0627\u0644\u0647\u0627\u062a\u0641: ",t.corporate.phone,""),e.xp6(2),e.hij("\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a: ",t.corporate.email,""),e.xp6(2),e.hij("\u0627\u0644\u062d\u0627\u0644\u0629: ",t.corporate.status,"")}}function V(i,u){1&i&&(e.TgZ(0,"div",17)(1,"p"),e._uU(2,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),e.qZA()())}const $=[{path:"",component:F,children:[{path:"",component:O},{path:"add-corporate/:id",component:(()=>{class i{constructor(t,o,r,a,n,c,g,f){this.activatedRoute=t,this.corporatesService=o,this.fb=r,this.localize=a,this.router=n,this._MessagesService=c,this.employeesService=g,this.IMS=f,this.corporateId="",this.isEditMode=!1,this.selectedFile=null,this.logoUrl=null,this.countriesList=[{id:"egypt",name:"egypt"}],this.citiesList=[{id:"Giza",name:"Giza"}],this.statuses=[{id:1,name:"Active"},{id:2,name:"In Active"},{id:3,name:"Blocked"},{id:4,name:"Black Listed"},{id:5,name:"Under Review"},{id:6,name:"Not Completed"}],this.addCorporateForm=this.fb.group({corporate_id:["",s.kI.required],name:["",s.kI.required],tax_register:["",s.kI.required],commercial_record:["",s.kI.required],country:["",s.kI.required],city:["",s.kI.required],address:["",s.kI.required],password:[""],logo:[null],phone:["",s.kI.required],email:["",[s.kI.required,s.kI.email]],status:["",s.kI.required]})}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{const o=t.get("id");o&&(this.corporateId=o,this.isEditMode=!0,this.corporatesService.GetCorporateById(o,{corporate_id:o}).subscribe(a=>{a&&a.data&&(this.corporateDetails=a.data,this.setFormValues(a.data))}))})}prepareNavBar(){this.corporatesService.initializeNavItems()}setFormValues(t){this.addCorporateForm.patchValue({corporate_id:t.id||"",name:t.name||"",tax_register:t.tax_register||"",commercial_record:t.commercial_record||"",country:t.country||"",city:t.city||"",address:t.address||"",password:t.password||"",phone:t.phone||"",email:t.email||"",status:t.status||""}),t.logo&&(this.logoUrl=t.logo),console.log(this.addCorporateForm.value)}openInNewWindow(t){window.open(t,"_blank")}removeLogo(){this.logoUrl=null,this.selectedFile=null}onFileChange(t){const o=t.target.files[0];if(o){this.selectedFile=o;const r=new FileReader;r.onload=a=>{this.logoUrl=a.target.result},r.readAsDataURL(o)}}updateCorporate(){if(this.addCorporateForm.valid){let t={};const o=this.addCorporateForm.value;console.log(this.selectedFile),null!=this.selectedFile?t={...o,logo:this.selectedFile?this.selectedFile:null}:(t={...o},delete t.logo),t.owner_title=this.corporateDetails.owner_title,this.corporatesService.UpdateCorporate(this.corporateId,t).subscribe({next:r=>{this._MessagesService.showSuccessMessage("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0634\u0631\u0643\u0629",3e3),this.navigateToCorporatesList()},error:r=>{console.error("Failed to update corporate:",r)}})}}navigateToCorporatesList(){const t=this.localize.translateRoute("/dashboard/corporates");this.router.navigate([t])}onSubmit(){this.addCorporateForm.valid&&this.isEditMode&&this.updateCorporate()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(d.gz),e.Y36(C),e.Y36(s.qu),e.Y36(m.An),e.Y36(d.F0),e.Y36(_.K),e.Y36(Z.M),e.Y36(x.K))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-corporate"]],viewQuery:function(o,r){if(1&o&&e.Gf(S,5),2&o){let a;e.iGM(a=e.CRH())&&(r.fileInput=a.first)}},standalone:!0,features:[e.jDz],decls:63,vars:13,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],["id","pills-tabContent",1,"tab-content","p-3"],["id","addCorporates","role","tabpanel","aria-labelledby","addCorporates-tab","tabindex","0",1,"tab-pane","fade","show","active"],["action","",1,"addCorporateForm",3,"formGroup","ngSubmit"],[1,"row","g-0"],[1,"col-md-3","p-2","text-center","position-relative"],["class","img-fluid rounded-start","alt","Corporate Logo","style","height: 200px; object-fit: cover",3,"src",4,"ngIf"],["class","fa fa-times position-absolute","style","top: 10px; left: 10px; cursor: pointer",3,"click",4,"ngIf"],["class","img-fluid rounded-start d-flex justify-content-center align-items-center","style","\n                    height: 200px;\n                    background-color: #f0f0f0;\n                    cursor: pointer;\n                  ",3,"click",4,"ngIf"],["type","file","hidden","",3,"change"],["fileInput",""],[1,"col-md-9"],[1,"card-body"],[1,"col-12","mb-3","text-end"],[1,"btn","px-4","back",3,"routerLink"],[1,"form-group","col-12","mb-3"],["for","corporateName",1,"form-label"],["type","text","name","name","formControlName","name",1,"form-control"],[1,"form-group","col-md-6","mb-3"],["for","corporateStatus",1,"form-label"],["name","status","formControlName","status","id","corporateStatus",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","corporateCountry",1,"form-label"],["name","country","formControlName","country","id","corporateCountry",1,"form-select"],["for","corporateCity",1,"form-label"],["name","city","formControlName","city","id","corporateCity",1,"form-select"],["for","corporateTaxRegister",1,"form-label"],["type","text","name","tax_register","formControlName","tax_register",1,"form-control"],["for","corporateCommercialRecord",1,"form-label"],["type","text","name","commercial_record","formControlName","commercial_record",1,"form-control"],["for","corporatePhone",1,"form-label"],["type","text","name","phone","formControlName","phone",1,"form-control"],["for","corporateEmail",1,"form-label"],["type","email","name","email","formControlName","email",1,"form-control"],["for","corporateAddress",1,"form-label"],["name","address","formControlName","address","rows","3",1,"form-control"],["type","submit",1,"btn","px-5",3,"disabled"],["alt","Corporate Logo",1,"img-fluid","rounded-start",2,"height","200px","object-fit","cover",3,"src"],[1,"fa","fa-times","position-absolute",2,"top","10px","left","10px","cursor","pointer",3,"click"],[1,"img-fluid","rounded-start","d-flex","justify-content-center","align-items-center",2,"height","200px","background-color","#f0f0f0","cursor","pointer",3,"click"],[1,"fa","fa-image","fa-2x"],[3,"value"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(6,"div",6)(7,"div",7),e.YNc(8,N,1,1,"img",8),e.YNc(9,P,1,0,"i",9),e.YNc(10,k,2,0,"div",10),e.TgZ(11,"input",11,12),e.NdJ("change",function(n){return r.onFileChange(n)}),e.qZA()(),e.TgZ(13,"div",13)(14,"div",14)(15,"div",1)(16,"div",15)(17,"a",16),e.ALo(18,"localize"),e._uU(19,"\u0631\u062c\u0648\u0639"),e.qZA()()()()()(),e.TgZ(20,"div",1)(21,"div",17)(22,"label",18),e._uU(23,"\u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629*"),e.qZA(),e._UZ(24,"input",19),e.qZA(),e.TgZ(25,"div",20)(26,"label",21),e._uU(27,"\u0627\u0644\u062d\u0627\u0644\u0629*"),e.qZA(),e.TgZ(28,"select",22),e.YNc(29,J,2,2,"option",23),e.qZA()(),e.TgZ(30,"div",20)(31,"label",24),e._uU(32,"\u0627\u0644\u062f\u0648\u0644\u0629*"),e.qZA(),e.TgZ(33,"select",25),e.YNc(34,Y,2,2,"option",23),e.qZA()(),e.TgZ(35,"div",20)(36,"label",26),e._uU(37,"\u0627\u0644\u0645\u062f\u064a\u0646\u0629*"),e.qZA(),e.TgZ(38,"select",27),e.YNc(39,j,2,2,"option",23),e.qZA()(),e.TgZ(40,"div",20)(41,"label",28),e._uU(42,"\u0627\u0644\u0633\u062c\u0644 \u0627\u0644\u0636\u0631\u064a\u0628\u064a*"),e.qZA(),e._UZ(43,"input",29),e.qZA(),e.TgZ(44,"div",20)(45,"label",30),e._uU(46,"\u0627\u0644\u0633\u062c\u0644 \u0627\u0644\u062a\u062c\u0627\u0631\u064a*"),e.qZA(),e._UZ(47,"input",31),e.qZA(),e.TgZ(48,"div",20)(49,"label",32),e._uU(50,"\u0627\u0644\u0647\u0627\u062a\u0641*"),e.qZA(),e._UZ(51,"input",33),e.qZA(),e.TgZ(52,"div",20)(53,"label",34),e._uU(54,"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a*"),e.qZA(),e._UZ(55,"input",35),e.qZA(),e.TgZ(56,"div",20)(57,"label",36),e._uU(58,"\u0627\u0644\u0639\u0646\u0648\u0627\u0646*"),e.qZA(),e._UZ(59,"textarea",37),e.qZA(),e.TgZ(60,"div",17)(61,"button",38),e._uU(62," \u062d\u0641\u0638 "),e.qZA()()()()()()()()()),2&o&&(e.xp6(5),e.Q6J("formGroup",r.addCorporateForm),e.xp6(3),e.Q6J("ngIf",r.logoUrl),e.xp6(1),e.Q6J("ngIf",r.logoUrl),e.xp6(1),e.Q6J("ngIf",!r.logoUrl),e.xp6(7),e.Q6J("routerLink",e.VKq(11,Q,e.lcZ(18,9,"/dashboard/corporates"))),e.xp6(12),e.Q6J("ngForOf",r.statuses),e.xp6(5),e.Q6J("ngForOf",r.countriesList),e.xp6(5),e.Q6J("ngForOf",r.citiesList),e.xp6(22),e.Q6J("disabled",r.addCorporateForm.invalid))},dependencies:[p.ez,p.sg,p.O5,d.Bz,d.rH,m.fQ,m.lO,s.u5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.UX,s.sg,s.u]})}return i})()},{path:"view-corporate/:id",component:(()=>{class i{constructor(t,o,r,a,n,c,g,f,R){this.activatedRoute=t,this.corporatesService=o,this.fb=r,this.localize=a,this.router=n,this._MessagesService=c,this.employeesService=g,this.IMS=f,this.dialog=R,this.corporateId="",this.logoUrl=null,this.isEditMode=!1,this.countriesList=[],this.citiesList=[],this.selectedFile=null,this.addCorporateForm=this.fb.group({corporate_id:["",s.kI.required],name:["",s.kI.required],tax_register:["",s.kI.required],commercial_record:["",s.kI.required],country:["",s.kI.required],city:["",s.kI.required],address:["",s.kI.required],password:[""],logo:[null],phone:["",s.kI.required],email:["",[s.kI.required,s.kI.email]],status:["",s.kI.required]})}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{const o=t.get("id");o&&(this.corporateId=o,this.isEditMode=!0,this.corporatesService.GetCorporateById(o,{corporate_id:o}).subscribe(a=>{a&&a.data&&(this.corporate=a.data,this.setFormValues(a.data))}))})}prepareNavBar(){this.corporatesService.initializeNavItems()}setFormValues(t){this.addCorporateForm.patchValue({corporate_id:t.id||"",name:t.name||"",tax_register:t.tax_register||"",commercial_record:t.commercial_record||"",country:t.country||"",city:t.city||"",address:t.address||"",password:t.password||"",phone:t.phone||"",email:t.email||"",status:t.status||""}),t.logo&&(this.logoUrl=t.logo)}openInNewWindow(t){window.open(t,"_blank")}removeLogo(){this.logoUrl=null,this.selectedFile=null}onFileChange(t){const o=t.target.files[0];if(o){this.selectedFile=o;const r=new FileReader;r.onload=a=>{this.logoUrl=a.target.result},r.readAsDataURL(o)}}addCorporate(){if(this.addCorporateForm.valid){const o={...this.addCorporateForm.value,attachment:this.selectedFile?[this.selectedFile]:[]};this.corporatesService.AddCorporate(o).subscribe({next:r=>{this._MessagesService.showSuccessMessage("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0634\u0631\u0643\u0629",3e3),this.navigateToCorporatesList()},error:r=>{console.error("Failed to add corporate:",r)}})}}updateCorporate(){if(this.addCorporateForm.valid){const o={...this.addCorporateForm.value,logo:this.selectedFile?this.selectedFile:null};this.corporatesService.UpdateCorporate(this.corporateId,o).subscribe({next:r=>{this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u062a\u062d\u062f\u064a\u062b",3e3),this.navigateToCorporatesList()},error:r=>{console.error("Failed to update corporate:",r)}})}}navigateToCorporatesList(){this.router.navigate(["/dashboard/corporates"])}navigateToAddCorporate(){const t=this.localize.translateRoute("/dashboard/corporates/add-corporate");this.router.navigate([t])}onSubmit(){this.addCorporateForm.valid&&(this.isEditMode?this.updateCorporate():this.addCorporate())}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(d.gz),e.Y36(C),e.Y36(s.qu),e.Y36(m.An),e.Y36(d.F0),e.Y36(_.K),e.Y36(Z.M),e.Y36(x.K),e.Y36(A.uw))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-corporate"]],standalone:!0,features:[e.jDz],decls:9,vars:2,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],["id","pills-tabContent",1,"tab-content","p-3"],["id","listCorporates","role","tabpanel","aria-labelledby","listCorporates-tab","tabindex","0",1,"tab-pane","fade","show","active"],[1,"col-12","mb-1"],["class","card mb-3 border-0",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"card","mb-3","border-0"],[1,"row","g-0","align-items-center"],[1,"col-md-3","p-2","text-center"],["alt","Corporate Logo",1,"img-fluid","rounded-start",2,"height","200px","object-fit","cover",3,"src"],[1,"col-md-9","mb-2"],[1,"card-body"],[1,"col-12","mb-3","text-end"],[1,"btn","px-4","back",3,"routerLink"],[1,""],[1,"text-center"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",1)(6,"div",5),e.YNc(7,D,31,15,"div",6),e.YNc(8,V,3,0,"div",7),e.qZA()()()()()()()),2&o&&(e.xp6(7),e.Q6J("ngIf",r.corporate),e.xp6(1),e.Q6J("ngIf",!r.corporate))},dependencies:[p.ez,p.O5,s.u5,d.Bz,d.rH,m.fQ,m.lO]})}return i})()}]}]}}]);